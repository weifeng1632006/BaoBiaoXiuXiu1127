
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Element Plus 数据表格</title>
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/element-plus"></script>
    <script src="https://unpkg.com/dayjs/dayjs.min.js"></script>
    <style>
        .table-container {
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            padding: 24px;
            margin: 0 auto;
            max-width: 1200px;
        }
        .filter-section {
            margin-bottom: 20px;
            padding: 16px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }
        .date-filter {
            display: flex;
            gap: 16px;
            align-items: center;
            flex-wrap: wrap;
        }
        .summary-row {
            background-color: #e3f2fd !important;
            font-weight: bold;
            color: #1976d2;
        }
        .table-header {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 16px 0;
            border-radius: 8px 8px 0 0;
            margin-bottom: 0;
        }
        .el-table {
            border: 1px solid #e0e0e0;
            border-radius: 0 0 8px 8px;
        }
        .el-table th {
            background-color: #f5f7fa;
            color: #606266;
            font-weight: 600;
        }
        .el-table td {
            border-bottom: 1px solid #e0e0e0;
        }
        .el-table .cell {
            padding: 12px 16px;
        }
        .reset-btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .reset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
        }
        .filter-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .filter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="table-container">
            <div class="card">
                <h2 class="table-header" style="text-align: center; margin: 0; padding: 20px;">
                    销售数据统计表
                </h2>
                
                <div class="filter-section">
                    <div class="date-filter">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-weight: 600; color: #333;">开始日期：</span>
                            <el-date-picker
                                v-model="startDate"
                                type="date"
                                placeholder="选择开始日期"
                                value-format="YYYY-MM-DD"
                                style="width: 160px;"
                            />
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-weight: 600; color: #333;">结束日期：</span>
                            <el-date-picker
                                v-model="endDate"
                                type="date"
                                placeholder="选择结束日期"
                                value-format="YYYY-MM-DD"
                                style="width: 160px;"
                            />
                        </div>
                        <button class="filter-btn" @click="filterData">
                            <i class="el-icon-search"></i> 筛选数据
                        </button>
                        <button class="reset-btn" @click="resetFilter">
                            <i class="el-icon-refresh"></i> 重置筛选
                        </button>
                    </div>
                </div>

                <el-table
                    :data="filteredData"
                    border
                    style="width: 100%"
                    :row-class-name="tableRowClassName"
                    @sort-change="handleSortChange"
                >
                    <el-table-column
                        prop="date"
                        label="日期"
                        sortable
                        width="120"
                        resizable
                    >
                    </el-table-column>
                    <el-table-column
                        prop="product"
                        label="产品名称"
                        sortable
                        width="180"
                        resizable
                    >
                    </el-table-column>
                    <el-table-column
                        prop="category"
                        label="产品类别"
                        sortable
                        width="140"
                        resizable
                    >
                    </el-table-column>
                    <el-table-column
                        prop="quantity"
                        label="数量"
                        sortable
                        width="100"
                        resizable
                    >
                    </el-table-column>
                    <el-table-column
                        prop="price"
                        label="单价"
                        sortable
                        width="120"
                        resizable
                    >
                        <template #default="scope">
                            ¥{{ scope.row.price.toFixed(2) }}
                        </template>
                    </el-table-column>
                    <el-table-column
                        prop="amount"
                        label="金额"
                        sortable
                        width="140"
                        resizable
                    >
                        <template #default="scope">
                            ¥{{ scope.row.amount.toFixed(2) }}
                        </template>
                    </el-table-column>
                    <el-table-column
                        prop="region"
                        label="销售区域"
                        sortable
                        width="120"
                        resizable
                    >
                    </el-table-column>
                    <el-table-column
                        prop="salesperson"
                        label="销售人员"
                        sortable
                        width="120"
                        resizable
                    >
                    </el-table-column>
                </el-table>

                <div style="margin-top: 20px; padding: 16px; background: #e3f2fd; border-radius: 8px;">
                    <h3 style="margin: 0 0 12px 0; color: #1976d2;">统计汇总</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                        <div style="background: white; padding: 12px; border-radius: 6px; border-left: 4px solid #4caf50;">
                            <div style="font-size: 12px; color: #666;">总数量</div>
                        <div style="font-size: 18px; font-weight: bold; color: #4caf50;">{{ totalQuantity }}</div>
                        </div>
                        <div style="background: white; padding: 12px; border-radius: 6px; border-left: 4px solid #2196f3;">
                            <div style="font-size: 12px; color: #666;">总金额</div>
                        <div style="font-size: 18px; font-weight: bold; color: #2196f3;">¥{{ totalAmount.toFixed(2) }}</div>
                        </div>
                        <div style="background: white; padding: 12px; border-radius: 6px; border-left: 4px solid #ff9800;">
                            <div style="font-size: 12px; color: #666;">平均单价</div>
                        <div style="font-size: 18px; font-weight: bold; color: #ff9800;">¥{{ averagePrice.toFixed(2) }}</div>
                        </div>
                        <div style="background: white; padding: 12px; border-radius: 6px; border-left: 4px solid #9c27b0;">
                            <div style="font-size: 12px; color: #666;">记录数量</div>
                        <div style="font-size: 18px; font-weight: bold; color: #9c27b0;">{{ filteredData.length }} 条</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, computed } = Vue;
        
        createApp({
            setup() {
                const startDate = ref('');
                const endDate = ref('');
                
                const tableData = ref([
                    { date: '2025-01-15', product: '笔记本电脑', category: '电子产品', quantity: 5, price: 5999.00, amount: 29995.00, region: '华东', salesperson: '张三' },
                    { date: '2025-01-18', product: '智能手机', category: '电子产品', quantity: 12, price: 3999.00, amount: 47988.00, region: '华南', salesperson: '李四' },
                    { date: '2025-01-20', product: '办公桌椅', category: '办公用品', quantity: 8, price: 899.00, amount: 7192.00, region: '华北', salesperson: '王五' },
                    { date: '2025-01-22', product: '打印机', category: '办公设备', quantity: 3, price: 1899.00, amount: 5697.00, region: '华东', salesperson: '赵六' },
                    { date: '2025-01-25', product: '平板电脑', category: '电子产品', quantity: 7, price: 3299.00, amount: 23093.00, region: '西南', salesperson: '钱七' },
                    { date: '2025-01-28', product: '显示器', category: '电子产品', quantity: 6, price: 1299.00, amount: 7794.00, region: '西北', salesperson: '孙八' },
                    { date: '2025-02-01', product: '键盘鼠标', category: '电脑配件', quantity: 25, price: 199.00, amount: 4975.00, region: '华东', salesperson: '周九' },
                    { date: '2025-02-05', product: '服务器', category: '企业设备', quantity: 2, price: 29999.00, amount: 59998.00, region: '华南', salesperson: '吴十' }
                ]);

                const filteredData = computed(() => {
                    let data = [...tableData.value];
                    
                    if (startDate.value && endDate.value) {
                        data = data.filter(item => {
                            const itemDate = item.date;
                            return itemDate >= startDate.value && itemDate <= endDate.value;
                        });
                    }
                    
                    return data;
                });

                const totalQuantity = computed(() => {
                    return filteredData.value.reduce((sum, item) => sum + item.quantity, 0);
                });

                const totalAmount = computed(() => {
                    return filteredData.value.reduce((sum, item) => sum + item.amount, 0);
                });

                const averagePrice = computed(() => {
                    return filteredData.value.length > 0 
                        ? filteredData.value.reduce((sum, item) => sum + item.price, 0) / filteredData.value.length
                        : 0;
                });

                const filterData = () => {
                    // 筛选逻辑已在 computed 中实现
                    ElMessage.success('数据筛选完成');
                };

                const resetFilter = () => {
                    startDate.value = '';
                    endDate.value = '';
                    ElMessage.info('筛选条件已重置');
                };

                const tableRowClassName = ({ rowIndex }) => {

                    if (rowIndex === filteredData.value.length - 1) {

                        console.log(`tableData的长度`,tableData.length)
                        return 'summary-row';
                    }
                    return '';
                };

                const handleSortChange = ({ column, prop, order }) => {
                    console.log('排序变化:', prop, order);
                };

                return {
                    startDate,
                    endDate,
                    filteredData,
                    totalQuantity,
                    totalAmount,
                    averagePrice,
                    filterData,
                    resetFilter,
                    tableRowClassName,
                    handleSortChange
                };
            }
        }).use(ElementPlus).mount('#app');
    </script>
</body>
</html>